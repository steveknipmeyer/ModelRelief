@model ModelRelief.Dto.Mesh

@{
    ViewBag.Title = "Model Composer";
}

    <div id="rootContainer">
        <div id="composerView">
            <div id="modelView">
                <canvas id="modelCanvas" tabindex='1'></canvas>
            </div>
            <div id="meshView">
                <canvas id="meshCanvas" tabindex='2'></canvas>
            </div>
            <div id="depthBufferView">
                <!-- The canvas is generated dynmacially. -->
                <canvas id="depthBufferCanvas"></canvas>
            </div>
        </div>
    </div>

    @section scripts {
        <!--******************************************************************************************-->
        <!--                                    Libraries                                             -->
        <!--******************************************************************************************-->
        <script src="~/lib/threejs/Detector.js"></script>
        <script src="~/lib/requirejs/require.js"></script>

        <!--******************************************************************************************-->
        <!--                                    ModelRelief                                           -->
        <!--******************************************************************************************-->
        <script>
            var composerMeshModel = @DataConversion.SerializeObject(Model)
        </script>
        <environment names="Development, Test">
            <script src="~/js/shaders.js"></script>
        </environment>
        <environment names="Staging, Production">
            <script src="~/js/shaders.min.js"></script>
        </environment>

        <script>
            requirejs.config({
                baseUrl: '.',
                paths: {
                    ModelRelief                             : ['/js/modelrelief', '/js/modelrelief.min'],

                    chai                                    : ['/lib/chai/chai', '/lib/chai/chai.min'],
                    three                                   : ['/lib/threejs/three', '/lib/threejs/three.min'],
                   'dat-gui'                                : '/lib/threejs/dat.gui.min',
                }
            });
            window.onload = function () {

                requirejs(['ModelRelief']);
            }
        </script>
    }

